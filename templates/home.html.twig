{% extends 'base.html.twig' %}

{% block title %}Pr√©kar - Home{% endblock %}

{% block body %}
    <!-- ==================== WELCOME-HERO (HOME) ==================== -->
    <section id="home" class="welcome-hero">
        <div class="container">
            <div class="welcome-hero-txt">
                <h2>Louez la voiture de vos r√™ves en toute simplicit√© !</h2>
                <p>
                    Envie de libert√© sur la route ? D√©couvrez notre large gamme de v√©hicules modernes et confortables √† des prix imbattables.
                    Que ce soit pour un week-end, un voyage d‚Äôaffaires ou des vacances inoubliables, trouvez la voiture parfaite et partez l‚Äôesprit l√©ger !
                </p>
                <button class="welcome-btn" onclick="window.location.href='#'">R√©servez d√®s maintenant</button>
            </div>
        </div>

        <!-- ==================== FORMULAIRE DE RECHERCHE ==================== -->
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="model-search-content">
                        <div class="row">
                            <!-- ‚úÖ Ann√©e -->
                            <div class="col-md-offset-1 col-md-2 col-sm-12">
                                <div class="single-model-search">
                                    <h2>Ann√©e</h2>
                                    <div class="model-select-icon">
                                        <input type="number" id="year" class="form-control" placeholder="Ann√©e" min="1900" max="2100">
                                    </div>
                                </div>

                                <!-- ‚úÖ Nombre de places -->
                                <div class="single-model-search">
                                    <h2>Nombre de places</h2>
                                    <div class="model-select-icon">
                                        <input type="number" id="places" class="form-control" placeholder="Nombre de places" min="1" max="9">
                                    </div>
                                </div>
                            </div>

                            <!-- ‚úÖ Marque + Livraison -->
                            <div class="col-md-offset-1 col-md-2 col-sm-12">
                                <div class="single-model-search">
                                    <h2>Marque</h2>
                                    <div class="model-select-icon">
                                        <input list="marques" id="make" class="form-control" placeholder="Marque">
                                        <datalist id="marques">
                                            {% for value in distinctValues %}
                                            {% if value.marque is not empty %}
                                            <option value="{{ value.marque|capitalize }}">
                                                {% endif %}
                                                {% endfor %}
                                        </datalist>
                                    </div>
                                </div>

                                <div class="single-model-search">
                                    <h2>Livraison</h2>
                                    <div class="model-select-icon">
                                        <select id="livraison" class="form-control">
                                            <option value="">Livraison</option>
                                            <option value="1">Oui</option>
                                            <option value="0">Non</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- ‚úÖ Mod√®le + Prix -->
                            <div class="col-md-offset-1 col-md-2 col-sm-12">
                                <div class="single-model-search">
                                    <h2>Mod√®le</h2>
                                    <div class="model-select-icon">
                                        <input list="modeles" id="model" class="form-control" placeholder="Mod√®le">
                                        <datalist id="modeles">
                                            {% for value in distinctValues %}
                                            {% if value.modele is not empty %}
                                            <option value="{{ value.modele|capitalize }}">
                                                {% endif %}
                                                {% endfor %}
                                        </datalist>
                                    </div>
                                </div>

                                <div class="single-model-search">
                                    <h2>Prix (Max)</h2>
                                    <div class="model-select-icon">
                                        <input type="number" id="price" class="form-control" placeholder="Prix max" min="0">
                                    </div>
                                </div>
                            </div>

                            <!-- ‚úÖ Bouton de recherche -->
                            <div class="col-md-2 col-sm-12">
                                <div class="single-model-search text-center">
                                    <button class="welcome-btn model-search-btn" onclick="search()">üîé Rechercher</button>
                                </div>
                            </div>
                        </div><!--/.row-->
                    </div><!--/.model-search-content-->
                </div><!--/.col-md-12-->
            </div><!--/.row-->
        </div><!--/.container-->
    </section>
    <!-- ==================== END WELCOME-HERO ==================== -->

    <!-- ‚úÖ SCRIPT JS -->
    <script>
        function search() {
            const year = document.getElementById('year').value || '';
            const make = document.getElementById('make').value || '';
            const model = document.getElementById('model').value || '';
            const price = document.getElementById('price').value || '';
            const places = document.getElementById('places').value || '';
            const livraison = document.getElementById('livraison').value || '';

            const url = `{{ path('app_search') }}?year=${year}&make=${make}&model=${model}&price=${price}&places=${places}&livraison=${livraison}`;
            window.location.href = url;
        }
    </script>









<!-- ==================== END WELCOME-HERO ==================== -->

    <!-- ==================== cars ==================== -->

    {% block stylesheets %}
        <style>
            /* === Section des voitures === */
            .voitures {
                padding: 50px 0;
                background-color: #f8f9fa;
                overflow-x: hidden;
                position: relative;
                margin-top: 180px;
                z-index: 100;
                border-radius: 20px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }

            .voitures-content {
                display: flex;
                gap: 20px;
                overflow-x: auto;
                padding-bottom: 20px;
                scroll-behavior: smooth;
                white-space: nowrap;
                width: 100%;
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .voitures-content::-webkit-scrollbar {
                display: none;
            }

            .single-voiture {
                flex: 0 0 280px;
                background-color: #ffffff;
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s ease, box-shadow 0.3s ease;
                cursor: pointer;
            }

            .single-voiture:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            }

            .voiture-img-box {
                width: 100%;
                height: 180px;
                overflow: hidden;
                position: relative;
            }

            .voiture-img-box img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.4s ease;
            }

            .single-voiture:hover .voiture-img-box img {
                transform: scale(1.05);
            }

            .voiture-info {
                padding: 20px;
                text-align: center;
            }

            .voiture-info h3 {
                font-size: 18px;
                font-weight: bold;
                color: #333;
                margin-bottom: 5px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .voiture-info p {
                font-size: 14px;
                color: #777;
                margin-bottom: 15px;
            }

            .voiture-actions {
                display: flex;
                justify-content: center;
                gap: 10px;
                margin-top: 10px;
            }

            .voiture-actions .btn {
                padding: 6px 12px;
                font-size: 14px;
                border-radius: 30px;
                font-weight: 500;
                cursor: pointer;
                transition: background 0.3s ease;
                border: none;
                outline: none;
            }

            .voiture-actions .btn-primary {
                background-color: #6565FF;
                color: #fff;
                border: 2px solid #6565FF;
            }

            .voiture-actions .btn-primary:hover {
                background-color: #6565FF;
                border-color: #6565FF
            }

            .voiture-actions .btn-secondary {
                background-color: #6c757d;
                color: #fff;
                border: 2px solid #6c757d;
            }

            .voiture-actions .btn-secondary:hover {
                background-color: #5a6268;
                border-color: #5a6268;
            }

            .voiture-actions .btn-like {
                background-color: transparent;
                border: 2px solid #ff4d4f;
                color: #ff4d4f;
                font-size: 18px;
                transition: background 0.3s ease, color 0.3s ease;
                padding: 6px 12px;
                border-radius: 30px;
            }

            .voiture-actions .btn-like:hover {
                background-color: #ff4d4f;
                color: #fff;
            }

            .prix {
                font-size: 16px;
                font-weight: bold;
                color: #28a745;
                margin-top: 10px;
            }
        </style>
    {% endblock %}

    <section id="voitures" class="voitures">
        <div class="container">
            <div class="section-header text-center">
                <p>D√©couvrez Nos <span>v√©hicules</span></p>
                <h2>Voitures Disponibles</h2>
            </div>

            <div class="voitures-content" id="voitures-list">
                {% if offres is not empty %}
                    {% for offre in offres %}
                        <div class="single-voiture">
                            <div class="voiture-img-box">
                                {% if offre.photos is not empty %}
                                    <img src="{{ asset('uploads/photos/' ~ offre.photos[0]) }}" alt="{{ offre.voiture.marque }} {{ offre.voiture.modele }}">
                                {% else %}
                                    <img src="{{ asset('assets/images/default-car.png') }}" alt="Image non disponible">
                                {% endif %}
                            </div>
                            <div class="voiture-info">
                                <h3>{{ offre.voiture.marque }} {{ offre.voiture.modele }}</h3>
                                <p>{{ offre.voiture.annee }} - {{ offre.voiture.typeEssence }} - {{ offre.voiture.nombrePlaces }} places</p>
                                <div class="voiture-actions">
                                    <button class="btn btn-primary">R√©server</button>
                                    <a href="{{ path('app_offre_detail', {'id': offre.id}) }}" class="btn btn-secondary">D√©tails</a>
                                    <button class="btn btn-like">‚ù§Ô∏è</button>
                                </div>
                                <p class="prix">{{ offre.prix|number_format(2, ',', ' ') }} ‚Ç¨ / jour</p>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p class="text-center text-muted">Aucune offre ne correspond √† votre recherche.</p>
                {% endif %}
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const list = document.getElementById('voitures-list');
            const leftArrow = document.getElementById('left-arrow');
            const rightArrow = document.getElementById('right-arrow');

            function updateArrows() {
                const tolerance = 2;
                leftArrow.classList.toggle('disabled', list.scrollLeft <= tolerance);
                rightArrow.classList.toggle('disabled', list.scrollLeft >= list.scrollWidth - list.clientWidth - tolerance);
            }

            function scrollLeft() {
                list.scrollBy({ left: -300, behavior: 'smooth' });
                setTimeout(updateArrows, 300);
            }

            function scrollRight() {
                list.scrollBy({ left: 300, behavior: 'smooth' });
                setTimeout(updateArrows, 300);
            }

            list.addEventListener('scroll', updateArrows);
            leftArrow.addEventListener('click', scrollLeft);
            rightArrow.addEventListener('click', scrollRight);

            window.addEventListener('load', () => {
                list.scrollLeft = 0;
                updateArrows();
            });
        });
    </script>

    <!-- ==================== SERVICE SECTION ==================== -->
    <section id="service" class="service">
        <div class="container">
            <div class="service-content">
                <div class="row">
                    <div class="col-md-4 col-sm-6">
                        <div class="single-service-item">
                            <div class="single-service-icon">
                                <i class="flaticon-car"></i>
                            </div>
                            <h2><a href="{{ path('app_offres') }}">Mes offres </a></h2>
                            <p>
                            Voir ici toutes mes offres d√©pos√©es.
                            </p>

                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
                        <div class="single-service-item">
                            <div class="single-service-icon">
                                <i class="flaticon-car-repair"></i>
                            </div>
                            <h2><a href="{{ path('ajouter_permis') }}" target="_blank">Ajouter mon permis</a></h2>
                            <p>
                                T√©l√©versez une photo ou un scan de votre permis de conduire pour valider votre r√©servation en toute simplicit√©.
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6">
    <div class="single-service-item">
        <div class="single-service-icon">
            <i class="flaticon-car-1"></i>
        </div>
        <h2><a href="{{ path('choisir_abonnement') }}">Souscrire un abonnement</a></h2>
        <p>
            Choisissez un abonnement pour b√©n√©ficier de nos services exclusifs.
        </p>
    </div>
</div>
                </div><!--/.row-->
            </div><!--/.service-content-->
        </div><!--/.container-->
    </section>
    <!-- ==================== END SERVICE SECTION ==================== -->

	<!-- ==================== D√âPOSER UNE OFFRE ==================== -->
	<section id="deposer-offre" class="deposer-offre">
	    <div class="container">
		<div class="section-header text-center">
		    <p class="subtitle">Vous souhaitez louer votre voiture ?</p>
		    <h2 class="title">D√©posez Votre Offre Maintenant</h2>
		</div>
		<div class="row align-items-center">
		    <div class="col-md-6">
		        <div class="offer-img">
		            <img src="{{ asset('assets/images/deposer-offre.jpg') }}" alt="D√©poser une offre" class="img-fluid shadow-lg">
		        </div>
		    </div>
		    <div class="col-md-6">
		        <div class="offer-txt">
		            <h3><strong>Gagnez De L'argent En Louant Votre Voiture</strong></h3>
		            <p class="offer-description">
		                Mettez votre v√©hicule en location en quelques clics. Remplissez un simple formulaire
		                et trouvez rapidement des locataires s√©rieux.
		            </p>
		            <ul class="offer-list">
		                <li><i class="fa fa-check"></i> Simple et rapide</li>
		                <li><i class="fa fa-check"></i> S√©curis√© et fiable</li>
		                <li><i class="fa fa-check"></i> Paiement s√©curis√©</li>
		            </ul>
		            <a href="{{ path('app_deposer_offre') }}" class="btn btn-primary btn-lg shadow">
		                <i class="fa fa-arrow-right"></i> Continuer vers la Page de D√©p√¥t
		            </a>
		        </div>
		    </div>
		</div>
	    </div>
	</section>
	<!-- ==================== FIN D√âPOSER UNE OFFRE ==================== -->














    <!-- ==================== CLIENTS SAY SECTION ==================== -->
    <section id="clients-say" class="clients-say">
        <div class="container">
            <div class="section-header">
                <h2>what our clients say</h2>
            </div>
            <div class="row">
                <div class="owl-carousel testimonial-carousel">
                    <div class="col-sm-3 col-xs-12">
                        <div class="single-testimonial-box">
                            <div class="testimonial-description">
                                <div class="testimonial-info">
                                    <div class="testimonial-img">
                                        <img src="{{ asset('assets/images/clients/c1.png') }}" alt="image of clients person" />
                                    </div>
                                </div>
                                <div class="testimonial-comment">
                                    <p>
                                        Sed ut pers unde omnis iste natus error sit voluptatem accusantium dolor laudan rem aperiam.
                                    </p>
                                </div>
                                <div class="testimonial-person">
                                    <h2><a href="#">tomas lili</a></h2>
                                    <h4>new york</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    {# Ajoute d'autres t√©moignages (c2.png, c3.png, etc.) #}
                </div>
            </div>
        </div>
    </section>
    <!-- ==================== END CLIENTS SAY SECTION ==================== -->

    <!-- ==================== BRAND SECTION ==================== -->
    <section id="brand" class="brand">
        <div class="container">
            <div class="brand-area">
                <div class="owl-carousel owl-theme brand-item">
                    <div class="item">
                        <a href="#">
                            <img src="{{ asset('assets/images/brand/br1.png') }}" alt="brand-image" />
                        </a>
                    </div>
                    {# Ajoute les autres items (br2.png, br3.png, etc.) #}
                </div>
            </div>
        </div>
    </section>
    <!-- ==================== END BRAND SECTION ==================== -->

    {# Le footer et la section "contact" sont d√©j√† dans base.html.twig #}

{% endblock %}

